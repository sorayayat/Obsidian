
## Data type

##### 숫자형
![](/img/Pasted%20image%2020240613122849.png)

##### DATE
![](/img/Pasted%20image%2020240613122910.png)

##### 문자
![](/img/Pasted%20image%2020240613122928.png)

##### ETC
![](/img/Pasted%20image%2020240613122936.png)


---



## Column Data type selection (컬럼 데이터 타입 선정)

#### 주의 할 점
- 저장되는 값을 성격의 맞는 최적의 타입을 선정
- 가변 길이 컬럼은 최적의 길이를 지정
- 조인 조건으로 사용되는 컬럼은 똑같은 데이터 타입을 선정


```dialogue

left: 무지렁이

right: 척척디비

< 그냥 넉넉히 잡아 둘까???

> 저장공간 낭비도 생각하자..

```



```dialogue

left: 무지렁이

right: 척척디비

< 그럼 이정도면 되지 않을까? 최대한 짧게가자

> 나중에 스키마 변경은 어떻게 하려고..감당 할 수 있겠니?

```



그래서 초기 스키마 설정에서 신중하게 조사 후 적절한 데이터 타입을 결정해야 한다.

---


### 문자열 (CHAR, VARCHAR)

### CHAR와 VARCHAR의 차이

CHAR와 VARCHAR의 가장 큰 차이점은 고정 길이인지 가변 길이인지의 여부다.

- 고정 길이
    
    - 실제 입력되는 칼럼 값의 길이에 따라 사용하는 저장 공간의 크기가 변하지 않는다.
    
- 가변 길이
    
    - 최대로 저장할 수 있는 값의 길이는 제한돼 있지만, 그 이하 크기의 값이 저장되면 그만큼 저장 공간이 줄어든다.
    - 저장된 값의 유효 크기를 별도로 저장해둬야 하므로 1~2바이트의 저장 공간이 추가로 더 필요하다.


그렇다면 어떤 타입을 선택 해야 할까?


나는 일차원적 생각으로 가변 길이가 더 좋지 않나??? 필요한 만큼만 사용하잖아! 라고 생각했다.

### 구조를 살펴보고 다시 생각해보자


![](/img/Pasted%20image%2020240613125540.png)



상위 순 으로 정리하면

Table Space > Data file > Segment > Extent > Block

---



![](/img/Pasted%20image%2020240613124853.png)


-  블록
	- 헤더나 row dir, 플래그 등등 여러가지 정보들
	- 가장 작은 단위

- Extent
	- 데이터 블록이 연속적으로 할당 된 것
	- 특정 타입의 정보를 저장하기 위한 단위

- Segment
	- 테이블의 특정 오브젝트를 담기 위해 할당되는 단위 (한개 이상의 익스텐트 모음)
	- 해당 테이블 안의 데이터는 세그먼트에 저장

- Table Space
	- 실제 데이터를 물리적으로 저장하는 공간
	- 레코드와 테이블 스키마 정보가 들어있다.


##### 초기 셋팅

char(20) vs varchar(20)

| aaa |
| --- |
| aaa |
| aaa |
| aaa |
| aaa |
100byte /  15byte

varchar가 훨~씬 유리함.


##### 변경 발생

| 아무튼 긴 문자 |
| -------- |
| 아무튼 긴 문자 |
| 아무튼 긴 문자 |
| 아무튼 긴 문자 |
| 아무튼 긴 문자 |
20byte를 초과하는 데이터 입력 발생했다고 가정합시다.


char는 정해진 길이 만큼만 데이터를 받는다.
하지만 가변길이 경우에 Block을 추가 생성(할당) **I/O** 시간 소모 -> 속도 차이는 크다.

---

CHAR 타입과 VARCHAR 타입 결정 시 가장 중요한 기준은 다음과 같다.

- 저장되는 문자열의 길이가 대개 비슷한가?
- 칼럼의 값이 자주 변경되는가?


변경이 자주 일어나는 상황은 CHAR가 유리 할 수 있다.

반면 변경이 자주 일어나지 않는 로그성 데이터는 VARCHAR가 적합 할 수 있다.



>참고
>
>데이터 구조 - https://yum-history.tistory.com/263
>	   	https://m.blog.naver.com/nayoon210/222211171950
